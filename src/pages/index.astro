---
import { getCollection } from "astro:content";

const posts = await getCollection("posts");
---

<html lang="it">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="viewport" content="width=device-width" />
		<title>Il Mio Blog Astro</title>
	</head>
	<body class="bg-gray-50 min-h-screen font-sans text-gray-900">
		<div class="max-w-6xl mx-auto py-12 px-4">
			<header class="mb-12 text-center">
				<h1
					class="text-5xl font-extrabold text-blue-700 mb-4 tracking-tight"
				>
					Il Mio Blog
				</h1>
				<p class="text-xl text-gray-600 max-w-2xl mx-auto">
					Costruito con Astro, Keystatic e Vercel. Un esempio di
					architettura JAMStack moderna, veloce e sicura.
				</p>
			</header>

			<main>
				{
					posts.length === 0 ? (
						<p class="text-center text-gray-500 text-lg">
							Nessun post trovato.
						</p>
					) : (
						<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
							{posts.map((post) => (
								<a
									href={`/posts/${post.slug}`}
									class="block group h-full"
								>
									<article class="bg-white rounded-2xl shadow-sm hover:shadow-2xl transition-all duration-300 h-full overflow-hidden border border-gray-100 flex flex-col">
										<div class="p-8 flex-1 flex flex-col">
											<h2 class="text-2xl font-bold mb-3 text-gray-900 group-hover:text-blue-600 transition-colors leading-tight">
												{post.data.title}
											</h2>
											<p class="text-gray-600 line-clamp-3 mb-6 flex-1 text-lg leading-relaxed">
												{post.body.substring(0, 120)}...
											</p>
											<div class="text-blue-600 font-semibold inline-flex items-center mt-auto group-hover:translate-x-1 transition-transform">
												Leggi l'articolo
												<svg
													class="w-5 h-5 ml-1"
													fill="none"
													viewBox="0 0 24 24"
													stroke="currentColor"
												>
													<path
														stroke-linecap="round"
														stroke-linejoin="round"
														stroke-width="2"
														d="M17 8l4 4m0 0l-4 4m4-4H3"
													/>
												</svg>
											</div>
										</div>
									</article>
								</a>
							))}
						</div>
					)
				}
			</main>

			<footer class="mt-20 border-t border-gray-200 pt-12 text-center">
				<p class="text-gray-500 mb-4">
					&copy; {new Date().getFullYear()} Il Mio Blog Astro. Tutti i diritti
					riservati.
				</p>
				<a
					href="/keystatic"
					class="inline-block bg-gray-900 text-white px-6 py-2 rounded-full text-sm font-medium hover:bg-gray-800 transition-colors"
					>Accedi all'Area Admin</a
				>
			</footer>
		</div>
	</body>
</html>
